<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTMLMCPSandbox</title>
    <link rel="stylesheet" href="internal:///baseline.css">
    <script src="internal:///cash.min.js"></script>
    <style>
        /* Skip link styling */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #000;
            color: #fff;
            padding: 8px 16px;
            z-index: 100;
            text-decoration: none;
            font-weight: bold;
            transition: top 0.3s ease;
        }

            .skip-link:focus {
                top: 0;
            }

        /* High-contrast focus outlines */
        :focus-visible {
            outline: 3px solid #0af;
            outline-offset: 3px;
        }
    </style>
</head>
<body>
    <!-- Skip link -->
    <a href="#readyContent" class="skip-link">Skip to main content</a>

    <main class="container" role="main">
        <section class="init-container" aria-live="polite">
            <!-- Spinner -->
            <div class="spinner" id="spinner" role="status" aria-label="Loading"></div>

            <!-- Loading text -->
            <div class="loading" id="loadingText">Initializing HTMLMCPSandbox...</div>

            <!-- Ready content -->
            <div class="ready" id="readyContent">
                <h1 id="readyTitle">HTMLMCPSandbox READY!</h1>
                <p>Welcome to your WebDOM sandbox. You can dynamically inject HTML, CSS, and JavaScript here.</p>

                <button id="demoBtn" aria-controls="demoGrid" aria-expanded="false">
                    Show Demo Grid
                </button>

                <!-- Demo grid -->
                <div class="demo-grid" id="demoGrid" style="display:none; margin-top:24px;" role="region" aria-labelledby="readyTitle">
                    <div class="row">
                        <div class="col">
                            <div class="card" tabindex="0">
                                <h2>Card One</h2>
                                <p>This card demonstrates layout and hover interaction.</p>
                                <button class="button-primary">Action</button>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card" tabindex="0">
                                <h2>Card Two</h2>
                                <p>Uses flexible spacing and adaptive color variables.</p>
                                <button class="button-primary">Try</button>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card" tabindex="0">
                                <h2>Card Three</h2>
                                <p>Responsive and theme-aware using baseline styles.</p>
                                <button class="button-primary">Explore</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Fade out helper
        function fadeOut(el, duration = 500, callback) {
            el.style.transition = `opacity ${duration}ms ease`;
            el.style.opacity = 0;
            setTimeout(() => callback && callback(), duration);
        }

        $(function () {
            // Simulate loading
            setTimeout(() => {
                fadeOut($("#spinner")[0]);
                fadeOut($("#loadingText")[0], 500, () => {
                    $("#readyContent").addClass("show");
                });
            }, 1500);

            // Toggle demo grid
            $("#demoBtn").on("click", function () {
                const grid = $("#demoGrid");
                const isVisible = grid.css("display") !== "none";
                grid.css("display", isVisible ? "none" : "block");
                $(this).attr("aria-expanded", !isVisible);
            });
        });
    </script>
</body>
</html>
